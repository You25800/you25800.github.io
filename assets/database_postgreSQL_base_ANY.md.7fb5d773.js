import{_ as s,o as a,c as e,R as l}from"./chunks/framework.318fa179.js";const h=JSON.parse('{"title":"PostgreSQL ANY 运算符的用法与实例","description":"","frontmatter":{},"headers":[],"relativePath":"database/postgreSQL/base/ANY.md","filePath":"database/postgreSQL/base/ANY.md","lastUpdated":1690289709000}'),o={name:"database/postgreSQL/base/ANY.md"},n=l(`<h1 id="postgresql-any-运算符的用法与实例" tabindex="-1">PostgreSQL ANY 运算符的用法与实例 <a class="header-anchor" href="#postgresql-any-运算符的用法与实例" aria-label="Permalink to &quot;PostgreSQL ANY 运算符的用法与实例&quot;">​</a></h1><p>本文介绍了在 PostgreSQL 中如何在使用 <code>ANY</code> 运算符检查一个子查询返回的一组值中是否至少存在一个值满足指定的条件。</p><p>有时候，你需要检查一个列表中是否至少有一个满足指定条件的值，比如：</p><ul><li>检查一个列表中是否包含了一个指定的值的元素。</li><li>检查一个列表中是否有一个大于或者小于一个指定值的元素。</li><li>检查一个班级的考试成绩是否有满分。</li></ul><p>您可以使用 PostgreSQL <code>ANY</code> 运算符来解决这些问题。</p><p>PostgreSQL <code>ANY</code> 运算符用于将一个值与一个值列表进行比较，只要值列表中有一个值满足指定的条件就返回真，否则返回假。</p><p>在 PostgreSQL 中， <code>SOME</code> 操作符是 <code>ANY</code> 的同义词。 您可以使用 <code>SOME</code> 关键字代替 <code>ANY</code>。</p><h2 id="postgresql-any-语法" tabindex="-1">PostgreSQL <code>ANY</code> 语法 <a class="header-anchor" href="#postgresql-any-语法" aria-label="Permalink to &quot;PostgreSQL \`ANY\` 语法&quot;">​</a></h2><p>要检查一个数组中是否至少存在一个满足条件的值，请按下面的语法使用 <code>ANY</code> 运算符：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">comparison_operator ANY (</span><span style="color:#F78C6C;">array</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>这里：</p><ul><li><code>comparison_operator</code> 是一个比较运算符，例如 <code>=</code>, <code>!=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code> 等。</li><li><code>array</code> 是一个数组或者<a href="/database/postgreSQL/base/子查询.html">子查询</a>，它跟在 <code>ANY</code> 运算符后面。子查询必须用括号括起来。</li><li>如果 <code>array</code> 中至少有一个值满足指定的条件，则表达式返回真，否则表达式返回假。</li></ul><p>例如：</p><ul><li><code>value = ANY (array)</code>: 只要数组中有一个等于 <code>value</code> 的值，该表达式返回 <code>true</code>, 否则返回 <code>false</code>。</li><li><code>value &gt; ANY (array)</code>: 只要数组中有一个小于 <code>value</code> 的值，该表达式返回 <code>true</code>, 否则返回 <code>false</code>。</li><li><code>value &lt; ANY (array)</code>: 只要数组中有一个大于 <code>value</code> 的值，该表达式返回 <code>true</code>, 否则返回 <code>false</code>。</li><li><code>value &lt;&gt; ANY (array)</code>: 只要数组中有一个不等于 <code>value</code> 的值，该表达式返回 <code>true</code>, 否则返回 <code>false</code>。</li></ul><h2 id="postgresql-any-实例" tabindex="-1">PostgreSQL ANY 实例 <a class="header-anchor" href="#postgresql-any-实例" aria-label="Permalink to &quot;PostgreSQL ANY 实例&quot;">​</a></h2><h3 id="postgresql-any-与数组" tabindex="-1">PostgreSQL ANY 与数组 <a class="header-anchor" href="#postgresql-any-与数组" aria-label="Permalink to &quot;PostgreSQL ANY 与数组&quot;">​</a></h3><p>我们经常需要检查一个数组中是否至少包含一个满足条件的元素，比如：</p><ul><li><p>要检查数组 <code>[1, 2, 3]</code> 是否包含一个值为 <code>2</code> 的元素，请使用以下语句：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ANY(</span><span style="color:#F78C6C;">ARRAY</span><span style="color:#A6ACCD;">[1, 2, 3]);</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;">column</span><span style="color:#89DDFF;">?</span></span>
<span class="line"><span style="color:#FFCB6B;">----------</span></span>
<span class="line"><span style="color:#FFCB6B;">t</span></span></code></pre></div></li><li><p>要检查数组 <code>[1, 2, 3]</code> 是否包含一个值大于 <code>2</code> 的元素，请使用以下语句：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> ANY(</span><span style="color:#F78C6C;">ARRAY</span><span style="color:#A6ACCD;">[1, 2, 3]);</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;">column</span><span style="color:#89DDFF;">?</span></span>
<span class="line"><span style="color:#FFCB6B;">----------</span></span>
<span class="line"><span style="color:#FFCB6B;">t</span></span></code></pre></div></li><li><p>要检查数组 <code>[1, 2, 3]</code> 是否包含一个值大于 <code>3</code> 的元素，请使用以下语句：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> ANY(</span><span style="color:#F78C6C;">ARRAY</span><span style="color:#A6ACCD;">[1, 2, 3]);</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;">column</span><span style="color:#89DDFF;">?</span></span>
<span class="line"><span style="color:#FFCB6B;">----------</span></span>
<span class="line"><span style="color:#FFCB6B;">f</span></span></code></pre></div><p>这里，因为 <code>[1, 2, 3]</code> 所有元素都不大于 <code>3</code>，因此表达式返回了 <code>false</code>。</p></li><li><p>要检查数组 <code>[1, 2, 3]</code> 是否包含一个值不等于 <code>3</code> 的元素，请使用以下语句：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&gt;</span><span style="color:#A6ACCD;"> ANY(</span><span style="color:#F78C6C;">ARRAY</span><span style="color:#A6ACCD;">[1, 2, 3]);</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;">column</span><span style="color:#89DDFF;">?</span></span>
<span class="line"><span style="color:#FFCB6B;">----------</span></span>
<span class="line"><span style="color:#FFCB6B;">t</span></span></code></pre></div></li></ul><h3 id="postgresql-any-与子查询" tabindex="-1">PostgreSQL ANY 与子查询 <a class="header-anchor" href="#postgresql-any-与子查询" aria-label="Permalink to &quot;PostgreSQL ANY 与子查询&quot;">​</a></h3><p>PostgreSQL <code>ANY</code> 运算符结合子查询会产生更大的威力。</p><p>让我们使用 <a href="./示例数据库.html">PostgreSQL Sakila 示例数据库</a>中的 <a href="/database/sakila/影片表.html"><code>film</code></a>表进行演示。</p><ul><li><p>要检查是否存在租金高于 5 美元的影片，请使用下面的 <code>ANY</code> 语句：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> ANY (</span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> rental_rate </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> film);</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;">column</span><span style="color:#89DDFF;">?</span></span>
<span class="line"><span style="color:#FFCB6B;">----------</span></span>
<span class="line"><span style="color:#FFCB6B;">f</span></span></code></pre></div><p>这里，请注意子查询：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> rental_rate </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> film</span></span></code></pre></div><p>它返回了所有影片你的租金。只要 5 小于所有租金的中的一个，则代表影片表中存在租金大于 5 美元的影片。</p><p>最终，表达式返回了 <code>false</code>，这说明了 <code>film</code> 表中没有租金大于 5 美元的影片。</p></li><li><p>要检查是否能用 1 美元租到影片，请使用以下语句：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#A6ACCD;"> ANY (</span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> rental_rate </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> film);</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;">column</span><span style="color:#89DDFF;">?</span></span>
<span class="line"><span style="color:#FFCB6B;">----------</span></span>
<span class="line"><span style="color:#FFCB6B;">t</span></span></code></pre></div><p>要判断能否用 1 美元租到影片，就是判断是否存在租金小于等于 1 美元。</p><p>表达式返回了 <code>false</code>，这说明了 <code>film</code> 表中有租金小于等于 1 美元的影片。也就是，您可以是使用 1 美元租到影片。</p></li></ul><h2 id="结论" tabindex="-1">结论 <a class="header-anchor" href="#结论" aria-label="Permalink to &quot;结论&quot;">​</a></h2><p>PostgreSQL <code>ANY</code> 运算符用于将一个值与一个值列表进行比较，只要值列表中有一个值满足指定的条件就返回真，否则返回假。 <code>ANY</code> 运算符可用于 <a href="/database/postgreSQL/base/WHERE.html">WHERE</a>子句中过滤指定条件行。</p>`,24),p=[n];function c(t,r,d,i,C,y){return a(),e("div",null,p)}const g=s(o,[["render",c]]);export{h as __pageData,g as default};
