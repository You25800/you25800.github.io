import{_ as i,c as a,o as e,b3 as t}from"./chunks/framework.CatkIGlB.js";const c=JSON.parse('{"title":"PostgreSQL DELETE 语句用法与实例","description":"","frontmatter":{},"headers":[],"relativePath":"database/postgreSQL/base/DELETE.md","filePath":"database/postgreSQL/base/DELETE.md","lastUpdated":1690289709000}'),l={name:"database/postgreSQL/base/DELETE.md"};function p(h,s,n,d,k,o){return e(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="postgresql-delete-语句用法与实例" tabindex="-1">PostgreSQL DELETE 语句用法与实例 <a class="header-anchor" href="#postgresql-delete-语句用法与实例" aria-label="Permalink to &quot;PostgreSQL DELETE 语句用法与实例&quot;">​</a></h1><p>本文介绍了 PostgreSQL 中的 <code>DELETE</code> 语句的基本形式，以及如何使用 <code>DELETE</code> 语句从数据表中删除行。</p><p>在 PostgreSQL 中，<code>DELETE</code> 语句用于从表中删除符合指定条件的行或者所有行。</p><h2 id="postgresql-delete-语法" tabindex="-1">PostgreSQL DELETE 语法 <a class="header-anchor" href="#postgresql-delete-语法" aria-label="Permalink to &quot;PostgreSQL DELETE 语法&quot;">​</a></h2><p>要从 PostgreSQL 数据库中的表中删除行，请按照如下的语法形式使用 <code>DELETE</code> 语句。</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">DELETE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> FROM</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> table_name</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">[where_clause]</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">[RETURNING expr];</span></span></code></pre></div><p>这里：</p><ul><li><p>在 <code>DELETE FROM</code> 关键字后的 <code>table_name</code> 是要从中删除数据的表的名称。</p></li><li><p><code>where_clause</code> 是 <a href="/database/postgreSQL/base/WHERE.html"><code>WHERE</code></a> 子句。 您可以在其中使用条件来指定要删除表中的哪些行。</p></li><li><p><code>WHERE</code> 子句是可选的。如果不指定 <code>WHERE</code> 子句，表中的所有行将被删除。</p></li><li><p><code>RETURNING</code> 子句是可选的。它用于返回删除的行的信息。</p><p><code>expr</code> 可以是列名或者表达式，多个列或者表达式请使用逗号分隔。 您还可以使用 <code>*</code> 表示表中的所有的列。</p><p>如果不指定 <code>RETURNING</code> 子句， <code>DELETE</code> 语句将返回删除的行数。</p></li></ul><p>如果您要更加高效率的清空一个表，请优先使用 <a href="/database/postgreSQL/base/清空表.html"><code>TRUNCATE TABLE</code></a> 语句。</p><h2 id="postgresql-delete-语句示例" tabindex="-1">PostgreSQL DELETE 语句示例 <a class="header-anchor" href="#postgresql-delete-语句示例" aria-label="Permalink to &quot;PostgreSQL DELETE 语句示例&quot;">​</a></h2><p>为了防止数据丢失，我们将创建一个表 <code>film_copy</code>，它是 <a href="/database/sakila/影片表.html"><code>film</code></a>表的拷贝。</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6182B8;--shiki-dark:#82AAFF;"> film_copy</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> AS</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> SELECT</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> *</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> FROM</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film;</span></span></code></pre></div><p><code>film_copy</code> 和 <code>film</code> 有相同的列和行。</p><h3 id="使用-postgresql-delete-从表中删除满足条件的行" tabindex="-1">使用 PostgreSQL DELETE 从表中删除满足条件的行 <a class="header-anchor" href="#使用-postgresql-delete-从表中删除满足条件的行" aria-label="Permalink to &quot;使用 PostgreSQL DELETE 从表中删除满足条件的行&quot;">​</a></h3><p>要从 <code>film_copy</code> 表中删除 <code>film_id</code> 为 1 的 1 个影片，请使用如下语句：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">DELETE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> FROM</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film_copy</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">WHERE</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film_id </span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> 1</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">;</span></span></code></pre></div><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">DELETE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> 1</span></span></code></pre></div><p>该语句返回 1 表示已经删除了 1 行。</p><p>要从 <code>film_copy</code> 表中删除 <code>film_id</code> 为 2, 3 或者 4 的 3 个影片，请使用如下语句：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">DELETE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> FROM</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film_copy</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">WHERE</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film_id </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">in</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> (</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">2</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">, </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">3</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">, </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">4</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">);</span></span></code></pre></div><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">DELETE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> 3</span></span></code></pre></div><p>该语句返回 3 表示已经删除了 3 行。</p><h3 id="使用-postgresql-delete-删除并返回删除的行" tabindex="-1">使用 PostgreSQL DELETE 删除并返回删除的行 <a class="header-anchor" href="#使用-postgresql-delete-删除并返回删除的行" aria-label="Permalink to &quot;使用 PostgreSQL DELETE 删除并返回删除的行&quot;">​</a></h3><p>要从 <code>film_copy</code> 表中删除 <code>film_id</code> 为 10 或者 11 的 2 个影片，并返回删除的影片的标题，请使用如下语句：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">DELETE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> FROM</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film_copy</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">WHERE</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film_id </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">in</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> (</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">10</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">, </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">11</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">)</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">RETURNING film_id, title;</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> film_id</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      title</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">---------+------------------</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      10</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ALADDIN</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> CALENDAR</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      11</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ALAMO</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> VIDEOTAPE</span></span>
<span class="line"><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">2</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> rows</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">)</span></span></code></pre></div><p>这里， <code>DELETE</code> 删除了 2 行，并返回了删除的 2 行的中的部分列。</p><h3 id="使用-postgresql-delete-从表中删除所有行" tabindex="-1">使用 PostgreSQL DELETE 从表中删除所有行 <a class="header-anchor" href="#使用-postgresql-delete-从表中删除所有行" aria-label="Permalink to &quot;使用 PostgreSQL DELETE 从表中删除所有行&quot;">​</a></h3><p>要从 <code>film_copy</code> 表中删除所有的影片， 请使用如下语句：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">DELETE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> FROM</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film_copy;</span></span></code></pre></div><h2 id="结论" tabindex="-1">结论 <a class="header-anchor" href="#结论" aria-label="Permalink to &quot;结论&quot;">​</a></h2><p>PostgreSQL <code>DELETE</code> 语句用来从一个表中删除一个或多个行。 如果不带有 <code>WHERE</code> 子句， 则删除所有的行。 如果带有 <code>RETURNING</code> 子句， <code>DELETE</code> 语句将返回删除的行的信息，否则它返回删除的行数。</p>`,32)])])}const E=i(l,[["render",p]]);export{c as __pageData,E as default};
