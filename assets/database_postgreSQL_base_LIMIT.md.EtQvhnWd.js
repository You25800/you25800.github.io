import{_ as i,c as a,o as n,b3 as l}from"./chunks/framework.CatkIGlB.js";const r=JSON.parse('{"title":"PostgreSQL LIMIT 用法与实例","description":"","frontmatter":{},"headers":[],"relativePath":"database/postgreSQL/base/LIMIT.md","filePath":"database/postgreSQL/base/LIMIT.md","lastUpdated":1690289709000}'),h={name:"database/postgreSQL/base/LIMIT.md"};function p(t,s,e,k,d,F){return n(),a("div",null,[...s[0]||(s[0]=[l(`<h1 id="postgresql-limit-用法与实例" tabindex="-1">PostgreSQL LIMIT 用法与实例 <a class="header-anchor" href="#postgresql-limit-用法与实例" aria-label="Permalink to &quot;PostgreSQL LIMIT 用法与实例&quot;">​</a></h1><p>本文介绍了在 PostgreSQL 中如何在 <code>SELECT</code> 语句中使用 <code>LIMIT</code> 子句限定查询返回的行数。</p><p>当您使用 <code>SELECT</code> 语句从一个大表查询数据的时候，如果返回全部的行将会导致很大的系统开销。您可能想要每次只返回少量的数据行。</p><p>在 PostgreSQL 中，您可以在 <code>SELECT</code> 语句中使用 <code>LIMIT</code> 子句来限定返回的行的数量。</p><p>注意， <code>LIMIT</code> 子句虽然被很多数据库系统支持，但它不是 SQL 标准。 为了符合 SQL 标准，您可以是用 <a href="./FETCH.html"><code>FETCH</code></a> 子句来完成同样的事情。</p><h2 id="postgresql-limit-子句介绍" tabindex="-1">PostgreSQL <code>LIMIT</code> 子句介绍 <a class="header-anchor" href="#postgresql-limit-子句介绍" aria-label="Permalink to &quot;PostgreSQL \`LIMIT\` 子句介绍&quot;">​</a></h2><p>PostgreSQL <code>LIMIT</code> 是<a href="./SELECT.html"><code>SELECT</code></a>语句的可选子句，用于限制查询返回的行数。</p><p>下面说明了 <code>LIMIT</code> 子句的语法：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">LIMIT</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> rows_count;</span></span></code></pre></div><p>这里，<code>rows_count</code> 指定要返回的最大行数。比如 <code>LIMIT 10</code> 表示最多返回 10 行。</p><p>带有 <code>LIMIT</code> 子句的 <code>SELECT</code> 语句完整用法如下：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">SELECT</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> column_list</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">FROM</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> table_name</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">[other_clauses]</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">LIMIT</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> rows_count;</span></span></code></pre></div><p>其中，<code>other_clauses</code> 是那些可以在 <code>SELECT</code> 语句中使用的其他子句，比如 <a href="./WHERE.html"><code>WHERE</code></a>, <a href="./ORDER_BY.html"><code>ORDER BY</code></a>, <a href="./OFFSET.html"><code>OFFSET</code></a> 等</p><p>通常，您需要在带有 <code>LIMIT</code> 子句的 <code>SELECT</code> 语句中一同使用 <code>ORDER BY</code> 子句，这样您可以得到一个按照指定的顺序排序的结果集。这是一个好的实践。</p><p>在一些分页的查询的应用中，您需要在 <code>SELECT</code> 语句使用 <code>LIMIT</code> 子句和 <code>OFFSET</code> 子句。如下：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">SELECT</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> column_list</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">FROM</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> table_name</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ORDER BY</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> ...</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">LIMIT</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> rows_count OFFSET skipped_rows;</span></span></code></pre></div><p>比如:</p><ul><li>第一页可以使用： <code>LIMIT 10 OFFSET 0</code> 表示最多返回 10 行。</li><li>第二页可以使用： <code>LIMIT 10 OFFSET 10</code> 表示跳过第一页的 10 行后最多返回 10 行。</li><li>第三页可以使用： <code>LIMIT 10 OFFSET 20</code> 表示跳过前两页的 20 行后最多返回 10 行。</li><li>以此类推…</li></ul><h2 id="postgresql-limit-示例" tabindex="-1">PostgreSQL <code>LIMIT</code> 示例 <a class="header-anchor" href="#postgresql-limit-示例" aria-label="Permalink to &quot;PostgreSQL \`LIMIT\` 示例&quot;">​</a></h2><p>我们将使用 <a href="/database/sakila/">Sakila 示例数据库</a> 中的表进行演示，请您先<a href="./示例数据库.html">在 PostgreSQL 中安装 Sakila 示例数据库</a>。</p><p>在 Sakila 示例数据库中， <a href="/database/sakila/影片表.html"><code>film</code> 表</a>存储了一个 DVD 商店中的可以租赁的所有的影片。</p><h3 id="使用-postgresql-limit-限制返回行数示例" tabindex="-1">使用 PostgreSQL LIMIT 限制返回行数示例 <a class="header-anchor" href="#使用-postgresql-limit-限制返回行数示例" aria-label="Permalink to &quot;使用 PostgreSQL LIMIT 限制返回行数示例&quot;">​</a></h3><p>要限制从 <code>film</code> 表查询时最多返回 5 行，请使用下面的带有 <code>LIMIT</code> 子句的 <code>SELECT</code> 语句：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">SELECT</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  film_id,</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  title,</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  release_year</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">FROM</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ORDER BY</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film_id</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">LIMIT</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> 5</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">;</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> film_id</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      title</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">       |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> release_year</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">---------+------------------+--------------</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">       1</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ACADEMY</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> DINOSAUR</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">       2</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ACE</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> GOLDFINGER</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">   |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">       3</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ADAPTATION</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> HOLES</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">       4</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> AFFAIR</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> PREJUDICE</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">       5</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> AFRICAN</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> EGG</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">      |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span></code></pre></div><h3 id="使用-postgresql-limit-获取前-n-行" tabindex="-1">使用 PostgreSQL LIMIT 获取前 N 行 <a class="header-anchor" href="#使用-postgresql-limit-获取前-n-行" aria-label="Permalink to &quot;使用 PostgreSQL LIMIT 获取前 N 行&quot;">​</a></h3><p>通常，您经常使用 <code>LIMIT</code> 子句从表中选择具有最高或最低值的行。</p><p>例如，要获得租金最高的 10 部电影，您可以按租金降序对电影进行排序，然后使用 <code>LIMIT</code> 子句获得前 10 部电影。您可以通过以下查询达到这个目的：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">SELECT</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  film_id,</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  title,</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  rental_rate</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">FROM</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ORDER BY</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> rental_rate </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">DESC</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">LIMIT</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> 10</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">;</span></span></code></pre></div><p>查询结果如下：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> film_id</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">        title</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">         |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> rental_rate</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">---------+----------------------+-------------</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      21</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> AMERICAN</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> CIRCUS</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">      |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">        4.99</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      31</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> APACHE</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> DIVINE</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">        |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">        4.99</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      13</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ALI</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> FOREVER</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">          |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">        4.99</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      20</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> AMELIE</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> HELLFIGHTERS</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">  |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">        4.99</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      28</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ANTHEM</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> LUKE</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">          |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">        4.99</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">       7</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> AIRPLANE</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> SIERRA</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">      |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">        4.99</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">       8</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> AIRPORT</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> POLLOCK</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">      |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">        4.99</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">       2</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ACE</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> GOLDFINGER</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">       |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">        4.99</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      10</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ALADDIN</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> CALENDAR</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">     |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">        4.99</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      32</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> APOCALYPSE</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> FLAMINGOS</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">        4.99</span></span></code></pre></div><h3 id="使用-postgresql-limit-和-offset-分页查询示例" tabindex="-1">使用 PostgreSQL LIMIT 和 OFFSET 分页查询示例 <a class="header-anchor" href="#使用-postgresql-limit-和-offset-分页查询示例" aria-label="Permalink to &quot;使用 PostgreSQL LIMIT 和 OFFSET 分页查询示例&quot;">​</a></h3><p><code>film</code> 表中共有 1000 行关于影片的信息。您可以通过以下带有 <a href="./COUNT.html"><code>COUNT(*)</code></a> 表达式的 <code>SELECT</code> 语句得到验证：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">SELECT</span><span style="--shiki-light:#6182B8;--shiki-dark:#82AAFF;"> COUNT</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">*</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">) </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">FROM</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film;</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> count</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">-------</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">  1000</span></span></code></pre></div><p>假设你有一个系统需要在前端展示所有的影片信息，将 1000 行信息全部展示在一页上并不是一个好的方案。因为这个方案如下的缺点：</p><ul><li>数据库性能。 一个语句中返回大量的数据会带给数据库服务器更大的内存开销和 IO 消耗。</li><li>应用性能。大量的数据会导致应用占用更大的内村，甚至回导致应用卡顿、卡死。</li><li>用户的体验。用户面对大量的数据会眩晕。</li></ul><p>一个更好的方案是分页显示所有的影片。您可以很轻松地使用 带有 <code>LIMIT</code> 和 <code>OFFSET</code> 子句的 <code>SELECt</code> 语句实现分页查询。</p><p>假设您需要每页显示 10 个影片信息，那么您可以使用如下的语句获取第一页的所有行：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">SELECT</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  film_id,</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  title,</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  release_year</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">FROM</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ORDER BY</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film_id</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">LIMIT</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> 10</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">;</span></span></code></pre></div><p>这里，为了让所有分页的顺序一致，我们使用 <code>ORDER BY film_id</code> 让影片按照 <code>film_id</code> 排序，并使用 <code>LIMIT 10</code> 限制了此查询最多返回 10 行。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> film_id</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      title</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">       |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> release_year</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">---------+------------------+--------------</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">       1</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ACADEMY</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> DINOSAUR</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">       2</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ACE</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> GOLDFINGER</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">   |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">       3</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ADAPTATION</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> HOLES</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">       4</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> AFFAIR</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> PREJUDICE</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">       5</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> AFRICAN</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> EGG</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">      |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">       6</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> AGENT</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> TRUMAN</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">     |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">       7</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> AIRPLANE</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> SIERRA</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">  |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">       8</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> AIRPORT</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> POLLOCK</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">  |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">       9</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ALABAMA</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> DEVIL</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">    |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      10</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ALADDIN</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> CALENDAR</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span></code></pre></div><p>为了获取第二页要显示的 10 行，我们使用 <code>OFFSET 10</code> 子句跳过第一页的 10 行，并使用 <code>LIMIT 10</code> 限制了此查询最多返回 10 行。您可以使用如下的语句获取第二页的所有行：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">SELECT</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  film_id,</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  title,</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  release_year</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">FROM</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ORDER BY</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film_id</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">OFFSET </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">10</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">LIMIT</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> 10</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">;</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> film_id</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">        title</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">        |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> release_year</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">---------+---------------------+--------------</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      11</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ALAMO</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> VIDEOTAPE</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">     |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      12</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ALASKA</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> PHANTOM</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">      |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      13</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ALI</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> FOREVER</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">         |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      14</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ALICE</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> FANTASIA</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">      |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      15</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ALIEN</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> CENTER</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">        |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      16</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ALLEY</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> EVOLUTION</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">     |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      17</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ALONE</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> TRIP</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">          |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      18</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> ALTER</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> VICTORY</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">       |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      19</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> AMADEUS</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> HOLY</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">        |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      20</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> AMELIE</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> HELLFIGHTERS</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">         2006</span></span></code></pre></div><p>同样的，您可以使用如下的语句获取第三页的所有行：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">SELECT</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  film_id,</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  title,</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  release_year</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">FROM</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ORDER BY</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> film_id</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">OFFSET </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">20</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">LIMIT</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> 10</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">;</span></span></code></pre></div><p>这里，我们使用 <code>OFFSET 20</code> 指示了跳过前两页的 20 行，并使用 <code>LIMIT 10</code> 限制了此查询最多返回 10 行。</p><h2 id="结论" tabindex="-1">结论 <a class="header-anchor" href="#结论" aria-label="Permalink to &quot;结论&quot;">​</a></h2><p>在本文中，您学习了如何使用 PostgreSQL <code>LIMIT</code> 子句限制 <code>SELECT</code> 语句返回的行数。</p><ol><li><code>LIMIT</code> 子句和 <code>ORDER BY</code> 子句用于解决 TOP N 问题。</li><li><code>LIMIT</code> 子句，<code>OFFSET</code> 子句和 <code>ORDER BY</code> 子句用于解决分页查询问题。</li></ol>`,51)])])}const B=i(h,[["render",p]]);export{r as __pageData,B as default};
