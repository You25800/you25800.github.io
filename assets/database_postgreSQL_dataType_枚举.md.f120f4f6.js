import{_ as s,o as a,c as n,R as l}from"./chunks/framework.333b51ca.js";const d=JSON.parse('{"title":"PostgreSQL 枚举数据类型","description":"","frontmatter":{},"headers":[],"relativePath":"database/postgreSQL/dataType/枚举.md","filePath":"database/postgreSQL/dataType/枚举.md","lastUpdated":1689663255000}'),p={name:"database/postgreSQL/dataType/枚举.md"},o=l(`<h1 id="postgresql-枚举数据类型" tabindex="-1">PostgreSQL 枚举数据类型 <a class="header-anchor" href="#postgresql-枚举数据类型" aria-label="Permalink to &quot;PostgreSQL 枚举数据类型&quot;">​</a></h1><p>本文介绍 PostgreSQL 枚举数据类型和它的用法。</p><h2 id="postgresql-枚举类型介绍" tabindex="-1">PostgreSQL 枚举类型介绍 <a class="header-anchor" href="#postgresql-枚举类型介绍" aria-label="Permalink to &quot;PostgreSQL 枚举类型介绍&quot;">​</a></h2><p>在 PostgreSQL 中，枚举类型是是一组有序的常量值的集合。比如，您可以使用枚举类型用作订单的状态值。</p><p>如果没有枚举类型，您可能使用整数 <code>1, 2, 3 ...</code> 或者字符串表示，但是很容易带来错误，比如书写错误等。用了枚举类型之后，数据库可以保证不能输入错误的值。</p><h2 id="创建-postgresql-枚举值" tabindex="-1">创建 PostgreSQL 枚举值 <a class="header-anchor" href="#创建-postgresql-枚举值" aria-label="Permalink to &quot;创建 PostgreSQL 枚举值&quot;">​</a></h2><p>要使用枚举值，您需要使用 <a href="/database/postgreSQL/databaseAndTable/创建表.html"><code>CREATE TYPE</code> 语句</a>创建一个自定义的枚举值。</p><p>这里是创建枚举类型的语法：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TYPE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> ENUM (</span></span>
<span class="line"><span style="color:#A6ACCD;">  label_1</span></span>
<span class="line"><span style="color:#A6ACCD;">  [, label_2, ... ]</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span></code></pre></div><p>其中，</p><ul><li><code>name</code> 是要创建的枚举类型的名称。</li><li><code>label_1</code>, <code>label_2</code> 是枚举类型中的常量值。</li></ul><h2 id="postgresql-枚举类型实例" tabindex="-1">PostgreSQL 枚举类型实例 <a class="header-anchor" href="#postgresql-枚举类型实例" aria-label="Permalink to &quot;PostgreSQL 枚举类型实例&quot;">​</a></h2><p>首先，使用下面的语句创建一个表示星期的枚举类型：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TYPE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">my_week</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> ENUM (</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Monday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Tuesday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Wednesday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Thursday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Friday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Saturday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Sunday</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span></code></pre></div><p>然后，使用下面的语句<a href="/database/postgreSQL/databaseAndTable/创建表.html">创建一个每天销售明细表</a>，</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">week_day_sales</span><span style="color:#A6ACCD;"> (</span></span>
<span class="line"><span style="color:#A6ACCD;">    id </span><span style="color:#C792EA;">integer</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">GENERATED</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ALWAYS</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">IDENTITY</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">PRIMARY KEY</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    week_day my_week </span><span style="color:#F78C6C;">NOT NULL</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    sales </span><span style="color:#C792EA;">integer</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NOT NULL</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span></code></pre></div><p>然后，使用下面的语句<a href="/database/postgreSQL/base/INSERT.html">插入几个新行</a>：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">INSERT INTO</span><span style="color:#A6ACCD;"> week_day_sales (week_day, sales)</span></span>
<span class="line"><span style="color:#F78C6C;">VALUES</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Monday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">110</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Tuesday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">120</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Wednesday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">130</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Thursday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">140</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Friday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">150</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Saturday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">160</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Sunday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">170</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Monday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">210</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Tuesday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">220</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Wednesday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">230</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Thursday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">240</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Friday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">250</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Saturday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">260</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Sunday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">270</span><span style="color:#A6ACCD;">);</span></span></code></pre></div><p>如果您向枚举列插入一个错误的值， PostgreSQL 将给出一个错误：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">INSERT INTO</span><span style="color:#A6ACCD;"> week_day_sales (week_day, sales)</span></span>
<span class="line"><span style="color:#F78C6C;">VALUES</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Error</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">110</span><span style="color:#A6ACCD;">);</span></span></code></pre></div><div class="language-txt"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ERROR:  invalid input value for enum my_week: &quot;Error&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">LINE 2: VALUES (&#39;Error&#39;, 110);</span></span></code></pre></div><p>下面的语句检索 <code>week_day_sales</code> 表的所有的行：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> week_day_sales;</span></span></code></pre></div><div class="language-txt"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">id | week_day  | sales</span></span>
<span class="line"><span style="color:#A6ACCD;">----+-----------+-------</span></span>
<span class="line"><span style="color:#A6ACCD;">  1 | Monday    |   110</span></span>
<span class="line"><span style="color:#A6ACCD;">  2 | Tuesday   |   120</span></span>
<span class="line"><span style="color:#A6ACCD;">  3 | Wednesday |   130</span></span>
<span class="line"><span style="color:#A6ACCD;">  4 | Thursday  |   140</span></span>
<span class="line"><span style="color:#A6ACCD;">  5 | Friday    |   150</span></span>
<span class="line"><span style="color:#A6ACCD;">  6 | Saturday  |   160</span></span>
<span class="line"><span style="color:#A6ACCD;">  7 | Sunday    |   170</span></span>
<span class="line"><span style="color:#A6ACCD;">  8 | Monday    |   210</span></span>
<span class="line"><span style="color:#A6ACCD;">  9 | Tuesday   |   220</span></span>
<span class="line"><span style="color:#A6ACCD;"> 10 | Wednesday |   230</span></span>
<span class="line"><span style="color:#A6ACCD;"> 11 | Thursday  |   240</span></span>
<span class="line"><span style="color:#A6ACCD;"> 12 | Friday    |   250</span></span>
<span class="line"><span style="color:#A6ACCD;"> 13 | Saturday  |   260</span></span>
<span class="line"><span style="color:#A6ACCD;"> 14 | Sunday    |   270</span></span>
<span class="line"><span style="color:#A6ACCD;">(14 rows)</span></span></code></pre></div><p>要按照枚举类型的值的顺序排序，请使用下面的语句：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> week_day_sales </span><span style="color:#F78C6C;">ORDER BY</span><span style="color:#A6ACCD;"> week_day;</span></span></code></pre></div><div class="language-txt"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">id | week_day  | sales</span></span>
<span class="line"><span style="color:#A6ACCD;">----+-----------+-------</span></span>
<span class="line"><span style="color:#A6ACCD;">  1 | Monday    |   110</span></span>
<span class="line"><span style="color:#A6ACCD;">  8 | Monday    |   210</span></span>
<span class="line"><span style="color:#A6ACCD;">  2 | Tuesday   |   120</span></span>
<span class="line"><span style="color:#A6ACCD;">  9 | Tuesday   |   220</span></span>
<span class="line"><span style="color:#A6ACCD;">  3 | Wednesday |   130</span></span>
<span class="line"><span style="color:#A6ACCD;"> 10 | Wednesday |   230</span></span>
<span class="line"><span style="color:#A6ACCD;">  4 | Thursday  |   140</span></span>
<span class="line"><span style="color:#A6ACCD;"> 11 | Thursday  |   240</span></span>
<span class="line"><span style="color:#A6ACCD;">  5 | Friday    |   150</span></span>
<span class="line"><span style="color:#A6ACCD;"> 12 | Friday    |   250</span></span>
<span class="line"><span style="color:#A6ACCD;">  6 | Saturday  |   160</span></span>
<span class="line"><span style="color:#A6ACCD;"> 13 | Saturday  |   260</span></span>
<span class="line"><span style="color:#A6ACCD;">  7 | Sunday    |   170</span></span>
<span class="line"><span style="color:#A6ACCD;"> 14 | Sunday    |   270</span></span>
<span class="line"><span style="color:#A6ACCD;">(14 rows)</span></span></code></pre></div><h2 id="postgresql-枚举函数" tabindex="-1">PostgreSQL 枚举函数 <a class="header-anchor" href="#postgresql-枚举函数" aria-label="Permalink to &quot;PostgreSQL 枚举函数&quot;">​</a></h2><p>PostgreSQL 提供了<a href="/database/postgreSQL_ref/enum-functions.html">几个用于枚举类型的函数</a>：</p><ul><li><a href="/database/postgreSQL_ref/enum_first.html"><code>enum_first()</code></a> 函数返回由参数指定的枚举类型的第一个枚举值。</li><li><a href="/database/postgreSQL_ref/enum_last.html"><code>enum_last()</code></a> 函数返回由参数指定的枚举类型的最后一个枚举值。</li><li><a href="/database/postgreSQL_ref/enum_range.html"><code>enum_range()</code></a> 函数返回由参数指定的枚举类型的所有枚举值，或者指定的范围内的枚举值。</li></ul><h2 id="结论" tabindex="-1">结论 <a class="header-anchor" href="#结论" aria-label="Permalink to &quot;结论&quot;">​</a></h2><p>在 PostgreSQL 中，枚举类型是一组有序的常量值的集合。</p>`,32),e=[o];function t(c,r,C,y,A,D){return a(),n("div",null,e)}const F=s(p,[["render",t]]);export{d as __pageData,F as default};
