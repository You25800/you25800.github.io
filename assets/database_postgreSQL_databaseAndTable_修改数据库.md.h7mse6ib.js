import{_ as i,c as a,o as e,b3 as t}from"./chunks/framework.CatkIGlB.js";const A=JSON.parse('{"title":"PostgreSQL ALTER DATABASE 修改数据库","description":"","frontmatter":{},"headers":[],"relativePath":"database/postgreSQL/databaseAndTable/修改数据库.md","filePath":"database/postgreSQL/databaseAndTable/修改数据库.md","lastUpdated":1761274889000}'),l={name:"database/postgreSQL/databaseAndTable/修改数据库.md"};function p(h,s,n,k,d,r){return e(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="postgresql-alter-database-修改数据库" tabindex="-1">PostgreSQL ALTER DATABASE 修改数据库 <a class="header-anchor" href="#postgresql-alter-database-修改数据库" aria-label="Permalink to &quot;PostgreSQL ALTER DATABASE 修改数据库&quot;">​</a></h1><p>本文介绍了如何在 PostgreSQL 中修改数据库的信息。</p><p>PostgreSQL 允许您使用 <code>ALTER DATABASE</code> 语句修改一个现有的数据库的信息。</p><h2 id="postgresql-alter-database-语法" tabindex="-1">PostgreSQL <code>ALTER DATABASE</code> 语法 <a class="header-anchor" href="#postgresql-alter-database-语法" aria-label="Permalink to &quot;PostgreSQL \`ALTER DATABASE\` 语法&quot;">​</a></h2><p>PostgreSQL <code>ALTER DATABASE</code> 可以修改数据库的各种信息，包括名称、属性、所有者、表空间等。</p><ul><li><p>要重命名一个数据库，请使用如下语法：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> name</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> RENAME </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">TO</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> new_name;</span></span></code></pre></div></li><li><p>要修改数据库的所有者，请使用如下语法：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> name</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> OWNER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> TO</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">{ new_owner | CURRENT_ROLE | CURRENT_USER | SESSION_USER };</span></span></code></pre></div></li><li><p>要修改数据库的选项，请使用如下语法：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> name</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> [WITH] </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALLOW_CONNECTIONS</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> { true | false};</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> name</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> [WITH] </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">CONNECTION</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> LIMIT</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> connlimit;</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> name</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> [WITH] IS_TEMPLATE { true | false};</span></span></code></pre></div><p>这里:</p><ul><li><code>ALLOW_CONNECTIONS</code> 是否允许连接到此数据库</li><li><code>CONNECTION LIMIT</code> 连接数限制</li><li><code>IS_TEMPLATE</code> 是否为模版数据库</li></ul></li><li><p>要修改数据库的表空间，请使用如下语法：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> name</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> SET</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> TABLESPACE new_tablespace;</span></span></code></pre></div></li><li><p>要修改数据库的配置参数，请使用如下语法：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> name</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> SET</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> configuration_parameter { </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">TO</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> | </span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> } { </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">value</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> | </span><span style="--shiki-light:#9C3EDA;--shiki-dark:#C792EA;">DEFAULT</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> };</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> name</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> SET</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> configuration_parameter </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">FROM</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> CURRENT;</span></span></code></pre></div><p>配置参数的新值将被写入到 <code>postgresql.conf</code> 文件中，以在新会话中加载使用。</p></li><li><p>要重置数据库的配置参数的值，请使用如下语法：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> name</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> RESET</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> configuration_parameter;</span></span></code></pre></div></li><li><p>要重置数据库所有的配置参数的值，请使用如下语法：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> name</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> RESET</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> ALL;</span></span></code></pre></div></li></ul><p>注意：要修改数据库的信息，您必须是超级用户或者数据库的所有者。</p><h2 id="postgresql-alter-database-实例" tabindex="-1">PostgreSQL <code>ALTER DATABASE</code> 实例 <a class="header-anchor" href="#postgresql-alter-database-实例" aria-label="Permalink to &quot;PostgreSQL \`ALTER DATABASE\` 实例&quot;">​</a></h2><p>我们将在 psql 工具中使用 <code>ALTER DATABASE</code> 修改数据库信息。</p><p>使用 <code>postgres</code> 用户登录 PostgreSQL 服务器：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">[</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">~</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">]</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> psql -U postgres</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">psql</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> (14.4)</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">Type</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;">help</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> for</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> help.</span></span></code></pre></div><p><a href="/database/postgreSQL/databaseAndTable/创建数据库.html">创建一个数据库</a> <code>test_db</code> 用于演示:</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#6182B8;--shiki-dark:#82AAFF;"> test_db</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">;</span></span></code></pre></div><h3 id="重命名数据库" tabindex="-1">重命名数据库 <a class="header-anchor" href="#重命名数据库" aria-label="Permalink to &quot;重命名数据库&quot;">​</a></h3><p>要将 <code>test_db</code> 重命名为 <code>test_new_db</code>，请使用下面的语句：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> test_db</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">RENAME </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">TO</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> test_new_db;</span></span></code></pre></div><p>您不能重命名当前数据库。</p><p>如果有其他用户正在使用您要重命名的数据库，PostgreSQL 会给出一个错误提示。</p><h3 id="修改数据库的表空间" tabindex="-1">修改数据库的表空间 <a class="header-anchor" href="#修改数据库的表空间" aria-label="Permalink to &quot;修改数据库的表空间&quot;">​</a></h3><p>数据库的默认的表空间为 <code>pg_default</code>，下面说明了如何将数据库的表空间修改为 <code>test_tablespace</code>。</p><p>首先，请使用下面的语句创建表空间：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> TABLESPACE</span><span style="--shiki-light:#6182B8;--shiki-dark:#82AAFF;"> test_tablespace</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">OWNER</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> postgres</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">LOCATION</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> &#39;</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;">D:\\\\data\\\\pg_tablespaces\\\\test_tablespace</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">;</span></span></code></pre></div><p>然后，使用下面的语句修改数据库的表空间：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> test_new_db</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">SET</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> TABLESPACE test_tablespace;</span></span></code></pre></div><h3 id="修改数据库是否允许连接" tabindex="-1">修改数据库是否允许连接 <a class="header-anchor" href="#修改数据库是否允许连接" aria-label="Permalink to &quot;修改数据库是否允许连接&quot;">​</a></h3><p>要将数据库设置为不允许连接，请使用下面的语句：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> test_new_db </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALLOW_CONNECTIONS</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> false;</span></span></code></pre></div><p>要设置数据库设置为允许连接，请使用下面的语句：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> test_new_db </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALLOW_CONNECTIONS</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> true;</span></span></code></pre></div><h3 id="修改数据库的连接数" tabindex="-1">修改数据库的连接数 <a class="header-anchor" href="#修改数据库的连接数" aria-label="Permalink to &quot;修改数据库的连接数&quot;">​</a></h3><p>要将此数据库的连接数限制为 10， 请使用下面的语句：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> test_new_db </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">CONNECTION</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> LIMIT</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> 10</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">;</span></span></code></pre></div><h3 id="修改数据库是否为模板数据库" tabindex="-1">修改数据库是否为模板数据库 <a class="header-anchor" href="#修改数据库是否为模板数据库" aria-label="Permalink to &quot;修改数据库是否为模板数据库&quot;">​</a></h3><p>要设置数据库设置为模板数据库，请使用下面的语句：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> test_new_db IS_TEMPLATE true;</span></span></code></pre></div><p>要设置数据库设置为不是模板数据库，请使用下面的语句：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> test_new_db IS_TEMPLATE false;</span></span></code></pre></div><h3 id="修改数据库的所有者" tabindex="-1">修改数据库的所有者 <a class="header-anchor" href="#修改数据库的所有者" aria-label="Permalink to &quot;修改数据库的所有者&quot;">​</a></h3><p>数据库 <code>test_new_db</code> 的所有者是 <code>postgres</code>，下面说明了如何要将其所有者修改为 <code>test</code>。</p><p>首先，使用下面的语句创建 <code>test</code> 用户：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> USER</span><span style="--shiki-light:#6182B8;--shiki-dark:#82AAFF;"> test</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> PASSWORD</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> &#39;</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;">123456</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">;</span></span></code></pre></div><p>然后，使用下面的语句将数据库的所有者修改为 <code>test</code>：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> test_new_db </span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">OWNER</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> TO</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> test;</span></span></code></pre></div><p>在本教程中，您学习了如何使用 PostgreSQL <code>ALTER DATABASE</code> 语句。</p>`,44)])])}const g=i(l,[["render",p]]);export{A as __pageData,g as default};
