import{_ as i,c as a,o as e,b3 as n}from"./chunks/framework.CatkIGlB.js";const o=JSON.parse('{"title":"PostgreSQL NUMERIC 类型 - 存储高精度的数字","description":"","frontmatter":{},"headers":[],"relativePath":"database/postgreSQL/dataType/NUMERIC.md","filePath":"database/postgreSQL/dataType/NUMERIC.md","lastUpdated":1690289709000}'),t={name:"database/postgreSQL/dataType/NUMERIC.md"};function l(h,s,p,k,d,r){return e(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="postgresql-numeric-类型-存储高精度的数字" tabindex="-1">PostgreSQL NUMERIC 类型 - 存储高精度的数字 <a class="header-anchor" href="#postgresql-numeric-类型-存储高精度的数字" aria-label="Permalink to &quot;PostgreSQL NUMERIC 类型 - 存储高精度的数字&quot;">​</a></h1><p>本文介绍了 PostgreSQL 中的数字类型 <code>NUMERIC</code>。</p><p>PostgreSQL 提供了 <code>NUMERIC</code> 类型用来存储具有高精度要求的数字类型的数据，比如金额、里程、销量等。</p><p>对 <code>NUMERIC</code> 类型的值的计算通常比浮点类型慢，因此，如果对于精度没有要求，则应该使用浮点类型或者整数。</p><h2 id="postgresql-numeric-语法" tabindex="-1">PostgreSQL <code>NUMERIC</code> 语法 <a class="header-anchor" href="#postgresql-numeric-语法" aria-label="Permalink to &quot;PostgreSQL \`NUMERIC\` 语法&quot;">​</a></h2><p>这是 <code>NUMERIC</code> 类型的语法：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#9C3EDA;--shiki-dark:#C792EA;">NUMERIC</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">precision</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">, scale)</span></span>
<span class="line"><span style="--shiki-light:#9C3EDA;--shiki-dark:#C792EA;">NUMERIC</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">precision</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">)</span></span>
<span class="line"><span style="--shiki-light:#9C3EDA;--shiki-dark:#C792EA;">NUMERIC</span></span></code></pre></div><p>说明：</p><ul><li><p><em><code>precision</code></em></p><p>可选的。它是允许存储的数字的总位数，含小数部分的位数。</p></li><li><p><em><code>scale</code></em></p><p>可选的。小数部分的位数。</p></li></ul><p>例如，数字 <code>1234.567</code> 具有 precision <code>7</code> 和 scale <code>3</code> 。</p><p>注意， <code>DECIMAL</code> 和 <code>NUMERIC</code> 是等价的。</p><h2 id="postgresql-numeric-取值" tabindex="-1">PostgreSQL <code>NUMERIC</code> 取值 <a class="header-anchor" href="#postgresql-numeric-取值" aria-label="Permalink to &quot;PostgreSQL \`NUMERIC\` 取值&quot;">​</a></h2><p><code>NUMERIC</code> 适用于存储含有大量数字的数值。它的小数点前最多 131072 位数字，小数点后最多 16383 位数字。</p><p>除了普通的数值之外，浮点类型还有几个特殊值：</p><ul><li><code>&#39;Infinity&#39;</code>: 无穷大</li><li><code>&#39;-Infinity&#39;</code>: 负无穷大</li><li><code>&#39;NaN&#39;</code>: 非数字</li></ul><p>其中， PostgreSQL v14 支持 <code>&#39;Infinity&#39;</code> 和 <code>&#39;-Infinity&#39;</code>。</p><h2 id="postgresql-numeric-实例" tabindex="-1">PostgreSQL <code>NUMERIC</code> 实例 <a class="header-anchor" href="#postgresql-numeric-实例" aria-label="Permalink to &quot;PostgreSQL \`NUMERIC\` 实例&quot;">​</a></h2><h3 id="基本用法" tabindex="-1">基本用法 <a class="header-anchor" href="#基本用法" aria-label="Permalink to &quot;基本用法&quot;">​</a></h3><p>使用下面的语句<a href="/database/postgreSQL/databaseAndTable/创建表.html">创建一个表</a>，名称为 <code>test_numeric</code>：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6182B8;--shiki-dark:#82AAFF;"> test_numeric</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> (</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  numeric_5_2 </span><span style="--shiki-light:#9C3EDA;--shiki-dark:#C792EA;">NUMERIC</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">5</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">,</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">2</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">),</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  numeric_i </span><span style="--shiki-light:#9C3EDA;--shiki-dark:#C792EA;">NUMERIC</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">);</span></span></code></pre></div><p>使用下面的语句<a href="/database/postgreSQL/base/INSERT.html">向表中插入一行数据</a>：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">INSERT INTO</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> test_numeric (numeric_5_2)</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">VALUES</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> (</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">1234</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">.</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">456</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">)</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">RETURNING numeric_5_2;</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">ERROR:</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;">  numeric</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> field</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> overflow</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">DETAIL:</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;">  A</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> field</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> with</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> precision</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> 5,</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> scale</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> 2</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> must</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> round</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> to</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> an</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> absolute</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> value</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> less</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> than</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> 10^3.</span></span></code></pre></div><p>这里，因为数字 <code>1234.234</code> 超出了 <code>NUMERIC(5,2)</code> 的范围，因此 PostgreSQL 给出了一个错误。</p><p>下面的语句修改了插入的值，运行它重新尝试插入：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">INSERT INTO</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> test_numeric (numeric_5_2)</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">VALUES</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> (</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">234</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">.</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">456</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">)</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">RETURNING numeric_5_2;</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;"> numeric_5_2</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">-------------</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">      234.46</span></span>
<span class="line"><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">1</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> row</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">)</span></span></code></pre></div><p>这里，由于 <code>NUMERIC(5,2)</code> 允许的小数位为 2，因此 <code>234.456</code> 被<a href="/database/postgreSQL_ref/round.html">四舍五入</a>为 <code>234.46</code>。</p><h3 id="infinity-与-nan" tabindex="-1">Infinity 与 NaN <a class="header-anchor" href="#infinity-与-nan" aria-label="Permalink to &quot;Infinity 与 NaN&quot;">​</a></h3><p>PostgreSQL 14 开始支持 <code>Infinity</code> 与 <code>-Infinity</code>。 您不能向一个有限范围的 <code>NUMERIC</code> 写入 <code>Infinity</code> 与 <code>-Infinity</code>， 否则 PostgreSQL 将给出一个错误。比如：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">INSERT INTO</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> test_numeric (numeric_5_2)</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">VALUES</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> (</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;">Infinity</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">)</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">RETURNING numeric_5_2;</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">ERROR:</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;">  numeric</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> field</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> overflow</span></span>
<span class="line"><span style="--shiki-light:#E2931D;--shiki-dark:#FFCB6B;">DETAIL:</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;">  A</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> field</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> with</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> precision</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> 5,</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> scale</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> 2</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> cannot</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> hold</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> an</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> infinite</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;"> value.</span></span></code></pre></div><p>下面的语句向类型为 <code>NUMERIC</code> 的列中写入了 <code>Infinity</code>:</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">INSERT INTO</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> test_numeric (numeric_i)</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">VALUES</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> (</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;">Infinity</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">)</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">RETURNING numeric_i;</span></span></code></pre></div><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> numeric_i</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">-----------</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">  Infinity</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">1</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> row</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">)</span></span></code></pre></div><p>下面的语句向类型为 <code>NUMERIC</code> 的列中写入了 <code>-Infinity</code>:</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">INSERT INTO</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> test_numeric (numeric_i)</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">VALUES</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> (</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;">-Infinity</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">)</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">RETURNING numeric_i;</span></span></code></pre></div><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> numeric_i</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">-----------</span></span>
<span class="line"><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;"> -</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">Infinity</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">1</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> row</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">)</span></span></code></pre></div><p>向类型为 <code>NUMERIC</code> 的列中写入了 <code>NaN</code>:</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">INSERT INTO</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> test_numeric (numeric_5_2)</span></span>
<span class="line"><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">VALUES</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> (</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#91B859;--shiki-dark:#C3E88D;">NaN</span><span style="--shiki-light:#39ADB5;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">)</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">RETURNING numeric_5_2;</span></span></code></pre></div><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes material-theme-lighter material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;"> numeric_5_2</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">-------------</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">         NaN</span></span>
<span class="line"><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;">1</span><span style="--shiki-light:#F76D47;--shiki-dark:#F78C6C;"> row</span><span style="--shiki-light:#90A4AE;--shiki-dark:#BABED8;">)</span></span></code></pre></div><h2 id="结论" tabindex="-1">结论 <a class="header-anchor" href="#结论" aria-label="Permalink to &quot;结论&quot;">​</a></h2><p>PostgreSQL 提供了 <code>NUMERIC</code> 类型用来存储具有高精度要求的数字类型的数据。由于性能问题，请只在有必要的时候选择 <code>NUMERIC</code> 类型。</p>`,43)])])}const g=i(t,[["render",l]]);export{o as __pageData,g as default};
